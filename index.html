<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tank Battle - 탱크 대전</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="game.css">
</head>
<body>
  <!-- 로비 화면 -->
  <div id="lobby" class="screen">
    <div class="lobby-container card-glass">
      <h1 class="text-gradient">Tank Battle</h1>
      <p class="lobby-subtitle">실시간 탱크 대전 게임</p>

      <div class="input-group">
        <label class="label">닉네임</label>
        <input type="text" id="playerName" class="input" placeholder="닉네임을 입력하세요" maxlength="12">
      </div>

      <div class="lobby-buttons">
        <button id="createRoomBtn" class="btn btn-gradient">방 만들기</button>
        <button id="joinRoomBtn" class="btn btn-secondary">방 참가</button>
      </div>

      <div id="roomList" class="room-list">
        <h3>대기 중인 방</h3>
        <div id="rooms" class="rooms"></div>
      </div>
    </div>
  </div>

  <!-- 대기실 화면 -->
  <div id="waitingRoom" class="screen hidden">
    <div class="waiting-container card-glass">
      <h2>대기실</h2>
      <p>방 코드: <span id="roomCode" class="badge badge-primary"></span></p>

      <div class="players-list">
        <div id="player1Slot" class="player-slot">
          <div class="tank-preview tank-blue"></div>
          <span class="player-name">대기 중...</span>
        </div>
        <div class="vs-text">VS</div>
        <div id="player2Slot" class="player-slot">
          <div class="tank-preview tank-red"></div>
          <span class="player-name">대기 중...</span>
        </div>
      </div>

      <div class="waiting-buttons">
        <button id="startGameBtn" class="btn btn-gradient hidden">게임 시작</button>
        <button id="leaveRoomBtn" class="btn btn-secondary">나가기</button>
      </div>
    </div>
  </div>

  <!-- 게임 화면 -->
  <div id="gameScreen" class="screen hidden">
    <div class="game-ui">
      <div class="player-info player1-info">
        <div class="health-bar">
          <div id="player1Health" class="health-fill"></div>
        </div>
        <span id="player1Name">Player 1</span>
      </div>

      <div class="game-status">
        <div id="turnIndicator" class="turn-indicator">내 턴</div>
        <div id="windIndicator" class="wind-indicator">바람: →5</div>
      </div>

      <div class="player-info player2-info">
        <span id="player2Name">Player 2</span>
        <div class="health-bar">
          <div id="player2Health" class="health-fill"></div>
        </div>
      </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div class="controls">
      <div class="angle-control">
        <label>각도: <span id="angleValue">45</span>°</label>
        <input type="range" id="angleSlider" min="0" max="90" value="45">
      </div>
      <div class="power-control">
        <label>파워: <span id="powerValue">50</span>%</label>
        <input type="range" id="powerSlider" min="10" max="100" value="50">
      </div>
      <button id="fireBtn" class="btn btn-gradient fire-btn">발사!</button>
    </div>
  </div>

  <!-- 결과 화면 -->
  <div id="resultScreen" class="screen hidden">
    <div class="result-container card-glass">
      <h1 id="resultTitle" class="text-gradient">승리!</h1>
      <p id="resultMessage">축하합니다!</p>
      <button id="returnLobbyBtn" class="btn btn-gradient">로비로 돌아가기</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="game.js"></script>
</body>
</html>
